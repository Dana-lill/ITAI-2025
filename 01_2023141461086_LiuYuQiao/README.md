# N皇后问题求解器

这是一个功能完整的N皇后问题求解器，使用Python实现，包含多种优化算法和详细的性能分析。

## 文件结构

```
n_queens_project/
├── n_queens.py              # 主程序文件
├── experiment_analysis.py   # 实验分析脚本
├── test_n_queens.py        # 测试文件
├── input.txt               # 输入文件示例
└── README.md               # 说明文档
```

## 功能特点

### 1. 完整的功能实现
- ✅ 支持键盘和文件输入N值
- ✅ N < 4时自动提示重新输入  
- ✅ 输出字符和数字两种棋盘格式
- ✅ 显示解的总数
- ✅ 支持只查找一个解或所有解

### 2. 算法优化
- ✅ **剪枝优化**: 使用集合标记已占用的列和对角线，O(1)冲突检测
- ✅ **位运算优化**: 使用位掩码进行更高效的状态管理
- ✅ **回溯算法**: 经典的递归回溯实现
- ✅ **模块化设计**: 独立的冲突检测和棋盘打印函数

### 3. 代码规范
- ✅ 充分的注释和文档
- ✅ 类型提示（Type Hints）
- ✅ 模块化结构
- ✅ 异常处理
- ✅ 单元测试

### 4. 实验分析
- ✅ N=4到N=12的性能测试
- ✅ 运行时间分析和可视化
- ✅ 时间复杂度理论分析
- ✅ 多算法性能对比

## 使用方法

### 1. 交互式运行

```bash
python n_queens.py
```

按提示选择输入方式和求解模式：
- 输入方式：键盘输入 / 文件输入
- 求解模式：所有解 / 单个解 / 位运算优化

### 2. 命令行运行

```bash
python n_queens.py 8
```

直接指定N值，输出8皇后问题的所有解。

### 3. 文件输入

创建输入文件（如`input.txt`），内容为：
```
8
```

然后在交互模式中选择文件输入。

### 4. 运行测试

```bash
python test_n_queens.py
```

运行演示和功能测试。

### 5. 性能分析

```bash
python experiment_analysis.py
```

运行完整的性能分析实验。

## 算法说明

### 1. 标准回溯算法

使用集合标记优化的回溯算法：
- 列冲突检测：`cols` 集合
- 主对角线冲突：`diag1` 集合（row - col）
- 副对角线冲突：`diag2` 集合（row + col）

时间复杂度：O(N!)
空间复杂度：O(N)

### 2. 位运算优化算法

使用位掩码进行状态管理：
- 列占用：`cols` 位掩码
- 主对角线占用：`diag1` 位掩码
- 副对角线占用：`diag2` 位掩码

优势：
- 位运算速度更快
- 内存占用更少
- 天然的剪枝效果

## 实验结果示例

### 运行时间对比（秒）

| N | 解数 | 标准算法 | 位运算优化 | 加速比 |
|---|------|----------|------------|--------|
| 4 | 2    | 0.0001   | 0.0001     | 1.0x   |
| 5 | 10   | 0.0003   | 0.0002     | 1.5x   |
| 6 | 4    | 0.0008   | 0.0005     | 1.6x   |
| 7 | 40   | 0.0025   | 0.0015     | 1.7x   |
| 8 | 92   | 0.0089   | 0.0052     | 1.7x   |
| 9 | 352  | 0.0312   | 0.0186     | 1.7x   |
| 10| 724  | 0.1245   | 0.0743     | 1.7x   |

### 时间复杂度分析

理论时间复杂度：O(N!)
实验验证：随N增长，运行时间呈指数级增长，符合N!的增长趋势。

平均增长比率：约3.5-4.0倍（N每增加1）

## 输出示例

### 4皇后问题解

```
第 1 个解:
+-------+
|. Q . .|
|. . . Q|
|Q . . .|
|. . Q .|
+-------+
解的向量表示: [1, 3, 0, 2]
坐标表示: (0, 1), (1, 3), (2, 0), (3, 2)

第 2 个解:
+-------+
|. . Q .|
|Q . . .|
|. . . Q|
|. Q . .|
+-------+
解的向量表示: [2, 0, 3, 1]
坐标表示: (0, 2), (1, 0), (2, 3), (3, 1)

总解数: 2
求解时间: 0.0001 秒
```

## 依赖库

核心功能无外部依赖，仅使用Python标准库。

可选依赖（用于实验分析）：
```bash
pip install matplotlib pandas numpy
```

## 技术亮点

1. **高效的冲突检测**: 使用集合进行O(1)冲突检测
2. **位运算优化**: 利用位操作提升性能
3. **灵活的接口设计**: 支持多种输入输出方式
4. **完整的测试覆盖**: 包含单元测试和性能测试
5. **详细的实验分析**: 理论与实践相结合的复杂度分析

## 进阶优化思路

1. **对称性优化**: 利用棋盘的对称性减少计算量
2. **并行计算**: 多线程处理不同的起始位置
3. **内存优化**: 使用更紧凑的数据结构
4. **启发式搜索**: 引入启发式函数指导搜索

## 作者

这是一个完整的N皇后问题教学和研究项目，展示了从基础算法到高级优化的完整实现过程。

---

*最后更新：2025年6月*